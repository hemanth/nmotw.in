
<!DOCTYPE HTML>
<html lang="en-GB">

<head>
    <meta charset="utf-8">
    <title>NMOTW</title>
    <meta name="author" content="Hemanth.HM"> 

    <meta name="description" content="If you are into web development at one point or the other you would have used Google's pagespeed insights to improve the performance of your site. &hellip;">   

    <!-- twitter card -->
    <meta name="twitter:card" content="Node module of the week.">
    <meta name="twitter:site" content="@nmotw">
    <meta name="twitter:creator" content="@nmotw">
    <meta name="twitter:title" content="NMOTW">
    <meta name="twitter:url" content="http://nmotw.in//github/blog/page/22/">
    <meta name="twitter:description" content="If you are into web development at one point or the other you would have used Google's pagespeed insights to improve the performance of your site. &hellip;">

    <!-- open graph -->
    <meta property="og:title" content="NMOTW" />
    <meta property="og:type" content="blog" />
    <meta property="og:url" content="http://nmotw.in//github/blog/page/22/" />
    <meta property="og:site_name" content="Node module of the week." />
    <meta property="og:description" content="If you are into web development at one point or the other you would have used Google's pagespeed insights to improve the performance of your site. &hellip;" />

    

    <!-- rest -->
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

    <link href="/atom.xml" rel="alternate" title="NMOTW" type="application/atom+xml">
    <link rel="canonical" href="http://nmotw.in//github/blog/page/22/">
    <link href="/favicon.png" rel="shortcut icon">
    <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
    <!--[if lt IE 9]><script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script><![endif]-->
    <script src="//ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
    

</head>


<body>
	<header id="header" class="inner"><h1><a href="/">NMOTW</a></h1>
<span class="tagline">Node Module Of The Week!</span>
<!-- <nav id="main-nav"><ul>
	<li><a href="/about">About</a></li>
	<li><a href="/archives">Archives</a></li>
	<li><a href="/contact">Contact</a></li>
	<li><a href="/github/subscribe">subscribe</a></li>
</ul>
</nav> -->
<!-- <nav id="mobile-nav"> -->
<!-- 	<div class="alignleft menu"> -->
<!-- 		<a class="button">Menu</a> -->
<!-- 		<div class="container"><ul>
	<li><a href="/about">About</a></li>
	<li><a href="/archives">Archives</a></li>
	<li><a href="/contact">Contact</a></li>
	<li><a href="/github/subscribe">subscribe</a></li>
</ul>
</div> -->
<!-- 	</div> -->
<!-- </nav> -->


</header>

	<div id="content" class="inner">


    <article class="post">
	<header>
		<h2 class="title">
			
			<a href="/psi/">
			
				PSI</a>
		</h2>
		<div class="meta date">








  


<time datetime="2014-06-19T19:22:39+05:30" pubdate data-updated="true">Jun 19<span>th</span>, 2014</time></div>
	</header>
	<div class="entry-content">
		<p>If you are into web development at one point or the other you would have used Google's pagespeed <a href="http://developers.google.com/speed/pagespeed/insights/">insights</a> to improve the performance of your site.</p>

<p>Now it's even easier to get those insights on your CLI with <a href="https://www.npmjs.org/package/psi">psi</a> thanks to the <a href="http://addyosmani.com/blog/">Addy Osmani</a> for such a wonderful module.</p>

<p>Formal defination of the module:</p>

<blockquote><p>PageSpeed Insights With Reporting</p></blockquote>

<p>Run mobile and desktop performance tests for your deployed site using <a href="https://developers.google.com/speed/docs/insights/v1/getting_started">Google PageSpeed Insights</a> with tidy reporting for your build process. A sample <a href="https://github.com/addyosmani/psi-gulp-sample">Gulpfile</a> demonstrating use is also available.</p>

<p>Uses <a href="https://github.com/zrrrzzt/gpagespeed/">gpagespeed</a> and the reporter in <a href="https://github.com/jrcryer/grunt-pagespeed">grunt-pagespeed</a>.</p>

<p>Install it -> <code>$ npm install psi</code></p>

<p><strong>Example usage:</strong></p>

<p>P.S: Registering for an API key from the <a href="https://developers.google.com/speed/docs/insights/v1/getting_started#auth">Google Developer Console</a> is recommended.</p>

<p><strong>In code:</strong></p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
</pre></td><td class='code'><pre><code class='js'><span class='line'><span class="kd">var</span> <span class="nx">psi</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;psi&#39;</span><span class="p">);</span>
</span><span class='line'>
</span><span class='line'><span class="nx">psi</span><span class="p">({</span>
</span><span class='line'>  <span class="c1">// key: &#39;...&#39;, optional</span>
</span><span class='line'>  <span class="nx">url</span><span class="o">:</span> <span class="s1">&#39;http://nmotw.in&#39;</span><span class="p">,</span>
</span><span class='line'>  <span class="nx">paths</span><span class="o">:</span> <span class="s1">&#39;&#39;</span><span class="p">,</span>           <span class="c1">// optional</span>
</span><span class='line'>  <span class="nx">locale</span><span class="o">:</span> <span class="s1">&#39;en_US&#39;</span><span class="p">,</span>     <span class="c1">// optional</span>
</span><span class='line'>  <span class="nx">strategy</span><span class="o">:</span> <span class="s1">&#39;mobile&#39;</span><span class="p">,</span>  <span class="c1">// optional</span>
</span><span class='line'>  <span class="nx">threshold</span><span class="o">:</span> <span class="mi">80</span>        <span class="c1">// optional</span>
</span><span class='line'><span class="p">});</span>
</span></code></pre></td></tr></table></div></figure>


<p><strong>On CLI:</strong></p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
<span class='line-number'>35</span>
<span class='line-number'>36</span>
<span class='line-number'>37</span>
<span class='line-number'>38</span>
</pre></td><td class='code'><pre><code class='sh'><span class='line'><span class="nv">$ </span>psi http://nmotw.in --strategy desktop
</span><span class='line'>Running Pagespeed Insights
</span><span class='line'>Pagespeed Insights: Processing results
</span><span class='line'>
</span><span class='line'>----------------------------------------------------------------
</span><span class='line'>
</span><span class='line'>URL:      http://nmotw.in/
</span><span class='line'>Strategy: desktop
</span><span class='line'>Score:    90
</span><span class='line'>
</span><span class='line'>----------------------------------------------------------------
</span><span class='line'>
</span><span class='line'>Number Resources                                 | 16
</span><span class='line'>Number Hosts                                     | 7
</span><span class='line'>Total Request Bytes                              | 1538
</span><span class='line'>Number Static Resources                          | 8
</span><span class='line'>Html Response Bytes                              | 7019
</span><span class='line'>Css Response Bytes                               | 17484
</span><span class='line'>Image Response Bytes                             | 384
</span><span class='line'>Javascript Response Bytes                        | 228348
</span><span class='line'>Other Response Bytes                             | 221982
</span><span class='line'>Number Js Resources                              | 5
</span><span class='line'>Number Css Resources                             | 3
</span><span class='line'>
</span><span class='line'>----------------------------------------------------------------
</span><span class='line'>
</span><span class='line'>Avoid Landing Page Redirects                     | 0
</span><span class='line'>Enable Gzip Compression                          | 0
</span><span class='line'>Leverage Browser Caching                         | 1.5
</span><span class='line'>Main Resource Server Response Time               | 0
</span><span class='line'>Minify Css                                       | 0
</span><span class='line'>Minify HTML                                      | 0
</span><span class='line'>Minify Java Script                               | 0.16
</span><span class='line'>Minimize Render Blocking Resources               | 8
</span><span class='line'>Optimize Images                                  | 0
</span><span class='line'>Prioritize Visible Content                       | 0
</span><span class='line'>
</span><span class='line'>----------------------------------------------------------------
</span></code></pre></td></tr></table></div></figure>


<p>If you have bunch of sites to analyse you could something like:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='sh'><span class='line'>cat links | xargs -L1 psi &gt; analysis.report
</span></code></pre></td></tr></table></div></figure>


<p><strong>GIF FTW!</strong></p>

<p><img src="/images/psi/psi.gif" alt="psi" /></p>

		
		
	</div>

</article>


    <article class="post">
	<header>
		<h2 class="title">
			
			<a href="/proxyquire/">
			
				Proxyquire</a>
		</h2>
		<div class="meta date">








  


<time datetime="2014-06-12T09:21:00+05:30" pubdate data-updated="true">Jun 12<span>th</span>, 2014</time></div>
	</header>
	<div class="entry-content">
		<p>Test cases always involves mocks and stub, sometimes there will be a need to mock <code>require</code> itself, that where proxyquire comes for our rescue.</p>

<p><a href="http://npmjs.org/package/proxyquire">Proxyquire</a>: Proxies nodejs require in order to allow overriding dependencies during testing.</p>

<p>Installing proxyquire: <code>npm install -D proxyquire</code></p>

<p><strong>Example:</strong></p>

<p>Say we a file <code>baz.js</code> under test and it looks like:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
</pre></td><td class='code'><pre><code class='js'><span class='line'><span class="kd">var</span> <span class="nx">os</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;os&#39;</span><span class="p">);</span>
</span><span class='line'>
</span><span class='line'><span class="nx">module</span><span class="p">.</span><span class="nx">exports</span> <span class="o">=</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
</span><span class='line'>  <span class="k">return</span> <span class="nx">os</span><span class="p">.</span><span class="nx">freemem</span><span class="p">();</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>It's evident that the return value of this function will never be a constant value.</p>

<p>How do we test it then?</p>

<p>Have a look at the test case:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
</pre></td><td class='code'><pre><code class='js'><span class='line'><span class="c1">// Get some assertion helper.</span>
</span><span class='line'><span class="kd">var</span> <span class="nx">assert</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;assert&#39;</span><span class="p">);</span>
</span><span class='line'>
</span><span class='line'><span class="c1">// First up we require proxyquire</span>
</span><span class='line'><span class="kd">var</span> <span class="nx">proxyquire</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;proxyquire&#39;</span><span class="p">);</span>
</span><span class='line'>
</span><span class='line'><span class="c1">// We make a mock of what we need.</span>
</span><span class='line'><span class="kd">var</span> <span class="nx">osStub</span> <span class="o">=</span> <span class="p">{</span>
</span><span class='line'>  <span class="nx">freemem</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span> <span class="k">return</span> <span class="mi">617619456</span><span class="p">;</span> <span class="p">}</span>
</span><span class='line'><span class="p">}</span>
</span><span class='line'>
</span><span class='line'><span class="c1">// Now some magic ;)</span>
</span><span class='line'><span class="kd">var</span> <span class="nx">freemem</span> <span class="o">=</span> <span class="nx">proxyquire</span><span class="p">(</span><span class="s2">&quot;./baz&quot;</span><span class="p">,{</span><span class="s1">&#39;os&#39;</span><span class="o">:</span><span class="nx">osStub</span><span class="p">});</span>
</span><span class='line'>
</span><span class='line'><span class="nx">it</span><span class="p">(</span><span class="s2">&quot;should return the amount of free memory&quot;</span><span class="p">,</span> <span class="kd">function</span><span class="p">(){</span>
</span><span class='line'>    <span class="nx">assert</span><span class="p">.</span><span class="nx">equal</span><span class="p">(</span><span class="nx">freemem</span><span class="p">(),</span><span class="mi">6176197456</span><span class="p">);</span>
</span><span class='line'><span class="p">});</span>
</span></code></pre></td></tr></table></div></figure>


<p>That's it! The test case will be green now :)</p>

<p>Proxyquire basically, <a href="https://github.com/thlorenz/proxyquire/blob/master/lib/proxyquire.js#L135">replaces</a> a module's require function.</p>

<p>There are many other features like:</p>

<ul>
<li>'noCallThru',</li>
<li>'callThru',</li>
<li>'noPreserveCache',</li>
<li>'preserveCache',</li>
<li>'load'</li>
</ul>


<p>Please feel free to go through their extensive API <a href="https://github.com/thlorenz/proxyquire#api">DOC</a></p>

<p><strong>GIF FTW!</strong></p>

<p><img src="/images/proxyquire/proxyquire.gif" alt="/images/proxyquire" /></p>

<p>Kudos to <a href="http://thlorenz.com/about/me">Thorsten Lorenz</a> for the wonderful module.</p>

		
		
	</div>

</article>


    <article class="post">
	<header>
		<h2 class="title">
			
			<a href="/music-meta-data/">
			
				Music Meta Data</a>
		</h2>
		<div class="meta date">








  


<time datetime="2014-06-05T18:08:35+05:30" pubdate data-updated="true">Jun 5<span>th</span>, 2014</time></div>
	</header>
	<div class="entry-content">
		<p><a href="https://github.com/leetreveil/musicmetadata">musicmetadata</a> is a streaming music metadata parser for node and the browser, but out focus is more on node side here.</p>

<p>It's worth noting that this module is influnced by <a href="https://github.com/aadsm/node-id3">node-id3</a></p>

<p>This module makes it easier to extra meta data from a given audio file, it supports:</p>

<ul>
<li>mp{1.1, 2.2, 2.3, 2.4, 3}</li>
<li>m4a, mp4.</li>
<li>vorbis (ogg, flac)</li>
<li>asf (wma, wmv)</li>
</ul>


<p>It parses the files for meaning fully meta data, for example it maintaines a common list of <a href="https://github.com/leetreveil/musicmetadata/blob/master/lib/common.js#L212">GENRES</a> and <a href="https://github.com/leetreveil/musicmetadata/blob/master/lib/common.js#L188">pic types</a> that will be matched and extracted from the Meta Data Atom.</p>

<p>But the clean part of this module is it makes use of Streams :-)</p>

<p>Kudos to <a href="http://twitter.com/leetreveil">Lee Treveil</a> on this.</p>

<p><strong>Let's see an example:</strong></p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>var fs = require('fs');
</span><span class='line'>var mmd = require('musicmetadata');
</span><span class='line'>
</span><span class='line'>var parser = mmd( fs.createReadStream('FreeSWSong.ogg') );
</span><span class='line'>
</span><span class='line'>parser.on('metadata',function(res) {
</span><span class='line'>    console.log(res);
</span><span class='line'>});
</span></code></pre></td></tr></table></div></figure>


<p>This would log something like:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
</pre></td><td class='code'><pre><code class='sh'><span class='line'><span class="o">{</span> title: <span class="s1">&#39;Free Software Song&#39;</span>,
</span><span class='line'>  artist: <span class="o">[</span> <span class="s1">&#39;Mark Forry, Yvette Osborne, Ron Fox, Steve Finney, Bill Cope, Kip McAtee, Ernie Provencher, Dan Auvil&#39;</span> <span class="o">]</span>,
</span><span class='line'>  albumartist: <span class="o">[]</span>,
</span><span class='line'>  album: <span class="s1">&#39;&#39;</span>,
</span><span class='line'>  year: <span class="s1">&#39;2009&#39;</span>,
</span><span class='line'>  track: <span class="o">{</span> no: 0, of: 0 <span class="o">}</span>,
</span><span class='line'>  genre: <span class="o">[</span> <span class="s1">&#39;Ethnic&#39;</span> <span class="o">]</span>,
</span><span class='line'>  disk: <span class="o">{</span> no: 0, of: 0 <span class="o">}</span>,
</span><span class='line'>  picture: <span class="o">[]</span>,
</span><span class='line'>  duration: 0 <span class="o">}</span>
</span></code></pre></td></tr></table></div></figure>


<p> Now, we could also listen for an event for a particular entinty of the meta data or custom metadata types that are not part of the standard metadata.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class='js'><span class='line'><span class="nx">parser</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="s1">&#39;artist&#39;</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">res</span><span class="p">){</span>
</span><span class='line'>  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">res</span><span class="p">);</span>
</span><span class='line'><span class="p">});</span>
</span></code></pre></td></tr></table></div></figure>


<p>Would log something like : <code>[ 'Mark Forry, Yvette Osborne, Ron Fox, Steve Finney, Bill Cope, Kip McAtee, Ernie Provencher, Dan Auvil' ]</code></p>

<p>A <code>done</code> event is triggered once the parsing is done, we could as well listen for it, to detect any errors.</p>

<p><strong>GIF FTW!</strong></p>

<p><img src="/images/music-meta-data/mmd.gif" alt="music-meta-data" /></p>

		
		
	</div>

</article>


    <article class="post">
	<header>
		<h2 class="title">
			
			<a href="/degenerator/">
			
				Degenerator</a>
		</h2>
		<div class="meta date">








  


<time datetime="2014-05-29T20:22:17+05:30" pubdate data-updated="true">May 29<span>th</span>, 2014</time></div>
	</header>
	<div class="entry-content">
		<p>Turns sync functions into ES6's async generator functions with <a href="http://n8.io/">Nathan Rajlich's</a> (A.K.A TooTallNate) <a href="https://www.npmjs.org/package/degenerator">degenerator</a></p>

<p>Get it: <code>$ npm install degenerator</code></p>

<p><strong>Example Usage:</strong></p>

<p>Say we have few sync function like:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="kd">function</span> <span class="nx">foo</span> <span class="p">()</span> <span class="p">{</span>
</span><span class='line'>  <span class="k">return</span> <span class="nx">baz</span><span class="p">();</span>
</span><span class='line'><span class="p">}</span>
</span><span class='line'>
</span><span class='line'><span class="kd">function</span> <span class="nx">bar</span> <span class="p">()</span> <span class="p">{</span>
</span><span class='line'>  <span class="k">return</span> <span class="nx">foo</span><span class="p">(</span><span class="nx">baz</span><span class="p">);</span>
</span><span class='line'><span class="p">}</span>
</span><span class='line'>
</span><span class='line'><span class="kd">function</span> <span class="nx">baz</span> <span class="p">()</span> <span class="p">{</span>
</span><span class='line'>  <span class="k">return</span> <span class="nx">bar</span><span class="p">();</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>Some degenerator magic!</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="kd">var</span> <span class="nx">degenerator</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;degenerator&#39;</span><span class="p">)</span>
</span><span class='line'><span class="kd">var</span> <span class="nx">js</span> <span class="o">=</span> <span class="nx">fs</span><span class="p">.</span><span class="nx">readFileSync</span><span class="p">(</span><span class="nx">sourceName</span><span class="p">,</span> <span class="s1">&#39;utf8&#39;</span><span class="p">);</span>
</span><span class='line'><span class="kd">var</span> <span class="nx">compiled</span> <span class="o">=</span> <span class="p">(</span><span class="nx">js</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;foo&#39;</span><span class="p">,</span><span class="s1">&#39;bar&#39;</span><span class="p">,</span><span class="s1">&#39;baz&#39;</span><span class="p">]);</span>
</span></code></pre></td></tr></table></div></figure>


<p>The complied source would be:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="kd">function</span><span class="o">*</span> <span class="nx">foo</span><span class="p">()</span> <span class="p">{</span>
</span><span class='line'>    <span class="k">return</span> <span class="nx">yield</span> <span class="nx">baz</span><span class="p">();</span>
</span><span class='line'><span class="p">}</span>
</span><span class='line'><span class="kd">function</span><span class="o">*</span> <span class="nx">bar</span><span class="p">()</span> <span class="p">{</span>
</span><span class='line'>    <span class="k">return</span> <span class="nx">yield</span> <span class="nx">foo</span><span class="p">(</span><span class="nx">baz</span><span class="p">);</span>
</span><span class='line'><span class="p">}</span>
</span><span class='line'><span class="kd">function</span><span class="o">*</span> <span class="nx">baz</span><span class="p">()</span> <span class="p">{</span>
</span><span class='line'>    <span class="k">return</span> <span class="nx">yield</span> <span class="nx">bar</span><span class="p">();</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<p><strong>GIF FTW!</strong></p>

<p><img src="/images/degenerator/degenerator.gif" alt="degnerator" /></p>

		
		
	</div>

</article>


    <article class="post">
	<header>
		<h2 class="title">
			
			<a href="/time-require/">
			
				Time-require</a>
		</h2>
		<div class="meta date">








  


<time datetime="2014-05-22T22:26:56+05:30" pubdate data-updated="true">May 22<span>nd</span>, 2014</time></div>
	</header>
	<div class="entry-content">
		<p>Were you looking for the stats of how long the require statements took in your scripts?</p>

<p>It's time to use (time-require)[https://www.npmjs.org/package/time-require] a node module that displays the execution time for Node.js modules loading by hooking and tracing all require() calls.</p>

<p><strong>Example Usage:</strong></p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
</pre></td><td class='code'><pre><code class='sh'><span class='line'><span class="nv">$ </span>cat &gt; <span class="nb">time</span>-require
</span><span class='line'>require<span class="o">(</span><span class="s2">&quot;time-require&quot;</span><span class="o">)</span>;
</span><span class='line'>^C
</span><span class='line'>
</span><span class='line'><span class="nv">$ </span>node <span class="nb">time</span>-require
</span><span class='line'>
</span><span class='line'>
</span><span class='line'>Start <span class="nb">time</span>: <span class="o">(</span>2014-05-22 16:56:02 UTC<span class="o">)</span> <span class="o">[</span><span class="nv">treshold</span><span class="o">=</span>1%<span class="o">]</span>
</span><span class='line'><span class="c">#  module                          time  %</span>
</span><span class='line'>1  text-table <span class="o">(</span>.....ble/index.js<span class="o">)</span>  40ms  ▇▇▇▇▇▇▇▇▇▇▇▇▇▇▇▇ 51%
</span><span class='line'>2  date-time <span class="o">(</span>../...ime/index.js<span class="o">)</span>   5ms  ▇▇ 6%
</span><span class='line'>3  parse-ms <span class="o">(</span>../n...-ms/index.js<span class="o">)</span>  10ms  ▇▇▇▇ 13%
</span><span class='line'>4  pretty-ms <span class="o">(</span>../...-ms/index.js<span class="o">)</span>  12ms  ▇▇▇▇▇ 15%
</span><span class='line'>5  ansi-styles <span class="o">(</span>....si-styles.js<span class="o">)</span>  10ms  ▇▇▇▇ 13%
</span><span class='line'>6  strip-ansi <span class="o">(</span>.....nsi/index.js<span class="o">)</span>   5ms  ▇▇ 6%
</span><span class='line'>7  has-color <span class="o">(</span>../...lor/index.js<span class="o">)</span>   1ms  ▇ 1%
</span><span class='line'>8  chalk <span class="o">(</span>../node...alk/index.js<span class="o">)</span>  20ms  ▇▇▇▇▇▇▇▇ 26%
</span><span class='line'>Total require<span class="o">()</span>: 8
</span><span class='line'>Total <span class="nb">time</span>: 78ms
</span></code></pre></td></tr></table></div></figure>


<p>This module makes use of a require (hook)[https://github.com/jaguard/time-require/blob/master/src/requireHook.js#L71] which is loaded as the first module so all the other requires gets counted, unhooks and then prints out a neat table with the <code>totalTime = Date.now() - startTime.getTime();</code> and the number of modules that were required.</p>

<p>Thanks to the module author <a href="http://jaguard.com">Ciprian Popa</a></p>

<p><strong>GIF FTW!</strong></p>

<p><img src="/images/time-require/time-require.gif" alt="time-require" /></p>

		
		
	</div>

</article>


    <article class="post">
	<header>
		<h2 class="title">
			
			<a href="/yosay/">
			
				Yosay</a>
		</h2>
		<div class="meta date">








  


<time datetime="2014-05-15T09:45:56+05:30" pubdate data-updated="true">May 15<span>th</span>, 2014</time></div>
	</header>
	<div class="entry-content">
		<p>Many of us wanted to greet like <a href="http://yeoman.io">Yeoman</a> in the CLI, now it's very easy to do that!</p>

<p>Here is <a href="https://github.com/yeoman/yosay">yosay</a> just like <a href="http://en.wikipedia.org/wiki/Cowsay">cowsay</a>, but less cow. Tell yeoman what to say or talk like yeoman!</p>

<p>Get <code>yosay</code> like an other node module: <code>npm install -g yosay</code></p>

<p><strong>Example usage:</strong></p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>
</span><span class='line'>$ echo "Yo! Mama. You can pipe." | yosay
</span><span class='line'>
</span><span class='line'>     _-----_
</span><span class='line'>    |       |    .--------------------------.
</span><span class='line'>    |--(o)--|    |  Yo! Mama. You can pipe. |
</span><span class='line'>   `---------´   '--------------------------'
</span><span class='line'>    ( _´U`_ )    
</span><span class='line'>    /___A___\    
</span><span class='line'>     |  ~  |     
</span><span class='line'>   __'.___.'__   
</span><span class='line'> ´   `  |° ´ Y ` </span></code></pre></td></tr></table></div></figure>




<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
</pre></td><td class='code'><pre><code class='sh'><span class='line'><span class="nv">$ </span>yosay <span class="s2">&quot;Node module of the week&quot;</span>
</span><span class='line'>
</span><span class='line'>     _-----_
</span><span class='line'>    |       |    .--------------------------.
</span><span class='line'>    |--<span class="o">(</span>o<span class="o">)</span>--|    |  Node module of the week |
</span><span class='line'>   <span class="sb">`</span>---------´   <span class="s1">&#39;--------------------------&#39;</span>
</span><span class='line'>    <span class="o">(</span> _´U<span class="sb">`</span>_ <span class="o">)</span>
</span><span class='line'>    /___A___<span class="se">\ </span>
</span><span class='line'>     |  ~  |
</span><span class='line'>   __<span class="s1">&#39;.___.&#39;</span>__
</span><span class='line'> ´   <span class="sb">`</span>  |° ´ Y <span class="sb">`</span>
</span></code></pre></td></tr></table></div></figure>




<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
</pre></td><td class='code'><pre><code class='sh'><span class='line'><span class="nv">$ </span>yosay <span class="s2">&quot;Yo! How&#39;s it going&quot;</span> --maxLength 4
</span><span class='line'>
</span><span class='line'>     _-----_
</span><span class='line'>    |       |    .------.
</span><span class='line'>    |--<span class="o">(</span>o<span class="o">)</span>--|    |  Yo! |
</span><span class='line'>   <span class="sb">`</span>---------´   | How<span class="s1">&#39;s |</span>
</span><span class='line'><span class="s1">    ( _´U`_ )    |  it  |</span>
</span><span class='line'><span class="s1">    /___A___\    | going |</span>
</span><span class='line'><span class="s1">     |  ~  |     &#39;</span>------<span class="s1">&#39;</span>
</span><span class='line'><span class="s1">   __&#39;</span>.___.<span class="err">&#39;</span>__
</span><span class='line'> ´   <span class="sb">`</span>  |° ´ Y <span class="sb">`</span>
</span></code></pre></td></tr></table></div></figure>


<p> If you want to use it in you node script, you could do:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
</pre></td><td class='code'><pre><code class='sh'><span class='line'> var <span class="nv">yosay</span> <span class="o">=</span> require<span class="o">(</span><span class="s1">&#39;yosay&#39;</span><span class="o">)</span>;
</span><span class='line'>
</span><span class='line'> console.log<span class="o">(</span> yosay<span class="o">(</span><span class="s2">&quot;Hope you enjoyed the session :)&quot;</span><span class="o">)</span> <span class="o">)</span>;
</span><span class='line'>
</span><span class='line'>      _-----_
</span><span class='line'>    |       |    .--------------------------.
</span><span class='line'>    |--<span class="o">(</span>o<span class="o">)</span>--|    |   Hope you enjoyed the   |
</span><span class='line'>   <span class="sb">`</span>---------´   |        session :<span class="o">)</span>        |
</span><span class='line'>    <span class="o">(</span> _´U<span class="sb">`</span>_ <span class="o">)</span>    <span class="s1">&#39;--------------------------&#39;</span>
</span><span class='line'>    /___A___<span class="se">\ </span>
</span><span class='line'>     |  ~  |
</span><span class='line'>   __<span class="s1">&#39;.___.&#39;</span>__
</span><span class='line'> ´   <span class="sb">`</span>  |° ´ Y <span class="sb">`</span>
</span></code></pre></td></tr></table></div></figure>


<p><strong>GIF FTW!:</strong></p>

<p><img src="/images/yosay/yosay.gif" alt="yosay" /></p>

<p><strong>Enjoy talking like the Yeoman! :)</strong></p>

		
		
	</div>

</article>


    <article class="post">
	<header>
		<h2 class="title">
			
			<a href="/omelette/">
			
				Omelette</a>
		</h2>
		<div class="meta date">








  


<time datetime="2014-05-08T18:08:15+05:30" pubdate data-updated="true">May 8<span>th</span>, 2014</time></div>
	</header>
	<div class="entry-content">
		<p><a href="https://www.npmjs.org/package/omelette">Omelette.js</a> a simple autocompletion helper for node, published by <a href="http://fatihak.in/">Fatih</a>.</p>

<p>It's a beautifuly crafted coffee code, that takes care of tab completions for your CLI tools.</p>

<p>It's takes care of <code>--compgen</code>, <code>--completion</code> and <code>--compzsh</code> for variations of SHELLs.</p>

<p>Say you need a simple CLI tool to greet user:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="err">#</span><span class="o">!</span><span class="err">/usr/bin/env node</span>
</span><span class='line'>
</span><span class='line'><span class="kd">var</span> <span class="nx">comp</span><span class="p">,</span> <span class="nx">omelette</span><span class="p">;</span>
</span><span class='line'>
</span><span class='line'><span class="nx">omelette</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s2">&quot;omelette&quot;</span><span class="p">);</span>
</span><span class='line'>
</span><span class='line'><span class="nx">comp</span> <span class="o">=</span> <span class="nx">omelette</span><span class="p">(</span><span class="s2">&quot;greeter &lt;user&gt;&quot;</span><span class="p">);</span>
</span><span class='line'>
</span><span class='line'><span class="nx">comp</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="s2">&quot;user&quot;</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
</span><span class='line'>  <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">reply</span><span class="p">([</span><span class="s2">&quot;hello&quot;</span><span class="p">,</span> <span class="s2">&quot;cruel&quot;</span><span class="p">,</span> <span class="s2">&quot;world&quot;</span><span class="p">]);</span>
</span><span class='line'><span class="p">});</span>
</span><span class='line'>
</span><span class='line'><span class="nx">comp</span><span class="p">.</span><span class="nx">init</span><span class="p">();</span>
</span></code></pre></td></tr></table></div></figure>


<p>Which on <code>user</code> completes "hello", "cruel", "world".</p>

<p>Say you saved the file as <code>greeter</code> all you have do to generator the completion is :</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='sh'><span class='line'><span class="nv">$ </span>./greeter --completion
</span></code></pre></td></tr></table></div></figure>


<p>That would result in the bleow for <code>bash</code> shell:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
</pre></td><td class='code'><pre><code class='sh'><span class='line'><span class="c">### greet completion - begin. generated by omelette ###</span>
</span><span class='line'><span class="k">if </span><span class="nb">type </span>compdef &amp;&gt;/dev/null; <span class="k">then</span>
</span><span class='line'><span class="k">  </span>_greet_complette<span class="o">()</span> <span class="o">{</span>
</span><span class='line'>    compadd -- <span class="sb">`</span>greet --compzsh --compgen <span class="s2">&quot;${CURRENT}&quot;</span> <span class="s2">&quot;${words[CURRENT-1]}&quot;</span> <span class="s2">&quot;${BUFFER}&quot;</span><span class="sb">`</span>
</span><span class='line'>  <span class="o">}</span>
</span><span class='line'>  compdef _greet_complette greet
</span><span class='line'><span class="k">elif </span><span class="nb">type complete</span> &amp;&gt;/dev/null; <span class="k">then</span>
</span><span class='line'><span class="k">  </span>_greet_complette<span class="o">()</span> <span class="o">{</span>
</span><span class='line'>    <span class="nv">COMPREPLY</span><span class="o">=(</span> <span class="k">$(</span><span class="nb">compgen</span> -W <span class="s1">&#39;$(greet --compbash --compgen &quot;${COMP_CWORD}&quot; &quot;${COMP_WORDS[COMP_CWORD-1]}&quot; &quot;${COMP_LINE}&quot;)&#39;</span> -- <span class="s2">&quot;${COMP_WORDS[COMP_CWORD]}&quot;</span><span class="k">)</span> <span class="o">)</span>
</span><span class='line'>  <span class="o">}</span>
</span><span class='line'>  <span class="nb">complete</span> -F _greet_complette greet
</span><span class='line'><span class="k">fi</span>
</span><span class='line'><span class="c">### greet completion - end ###</span>
</span></code></pre></td></tr></table></div></figure>


<p>In zsh, you can write these:</p>

<p><code>echo '. &lt;(./greeter --completion)' &gt;&gt; .zshrc</code></p>

<p>In bash, you should write:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class='sh'><span class='line'>./greeter --completion &gt;&gt; ~/greeter.completion.sh
</span><span class='line'><span class="nb">echo</span> <span class="s1">&#39;source ~/greeter.completion.sh&#39;</span> &gt;&gt; .bash_profile
</span></code></pre></td></tr></table></div></figure>


<p>Now you must see tab completion for greeter!</p>

<p>You can also use:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="c1">// Listen all fragments by &quot;complete&quot; event</span>
</span><span class='line'>
</span><span class='line'><span class="nx">complete</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="s2">&quot;complete&quot;</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">fragment</span><span class="p">,</span> <span class="nx">word</span><span class="p">,</span> <span class="nx">line</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>  <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">reply</span><span class="p">([</span><span class="s2">&quot;hello&quot;</span><span class="p">,</span> <span class="s2">&quot;world&quot;</span><span class="p">]);</span>
</span><span class='line'><span class="p">});</span>
</span><span class='line'>
</span><span class='line'>
</span><span class='line'><span class="c1">// Listen events by its order.</span>
</span><span class='line'>
</span><span class='line'><span class="nx">complete</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="s2">&quot;$1&quot;</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">word</span><span class="p">,</span> <span class="nx">line</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>  <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">reply</span><span class="p">([</span><span class="s2">&quot;hello&quot;</span><span class="p">,</span> <span class="s2">&quot;world&quot;</span><span class="p">]);</span>
</span><span class='line'><span class="p">});</span>
</span></code></pre></td></tr></table></div></figure>


<p><strong>A wonderful GIF by the author:</strong></p>

<p><img src="/images/omelette/omelette.gif" alt="omelette.gif" /></p>

<p>Enjoy your tab completions!</p>

		
		
	</div>

</article>


    <article class="post">
	<header>
		<h2 class="title">
			
			<a href="/rhyme/">
			
				Rhyme</a>
		</h2>
		<div class="meta date">








  


<time datetime="2014-05-01T13:34:59+05:30" pubdate data-updated="true">May 1<span>st</span>, 2014</time></div>
	</header>
	<div class="entry-content">
		<p>Out of all the awesome module that <a href="https://www.npmjs.org/~substack">James Halliday</a> A.K.A <a href="http://substack.net/">substack</a> has authored a module named <a href="https://github.com/substack/node-rhyme">rhyme</a> a rhyming dictionary! This made it to the nmotw list ;)</p>

<p>The module makes use of CMU dictionary's <a href="https://cmusphinx.svn.sourceforge.net/svnroot/cmusphinx/trunk/cmudict/cmudict.0.7a">data</a> and picks up pronounce, syllables and plays around lazily to generate rhyming words for a given word.</p>

<p><strong>Example Usage:</strong></p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="kd">var</span> <span class="nx">rhyme</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;rhyme&#39;</span><span class="p">);</span>
</span><span class='line'>
</span><span class='line'><span class="nx">rhyme</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">r</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">r</span><span class="p">.</span><span class="nx">rhyme</span><span class="p">(</span><span class="s1">&#39;rhyme&#39;</span><span class="p">).</span><span class="nx">join</span><span class="p">(</span><span class="s1">&#39; &#39;</span><span class="p">));</span>
</span><span class='line'><span class="p">});</span>
</span></code></pre></td></tr></table></div></figure>




<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class='sh'><span class='line'><span class="nv">$ </span>node why.js
</span><span class='line'>BEIM CHIME CLIMB CRIME DIME GRIME HAIM HEIM HIME I<span class="err">&#39;</span>M KIME LIME LYME MIME PRIME SEIM SIME SLIME SYME THYME TIME
</span></code></pre></td></tr></table></div></figure>


<p><strong>GIF FTW!</strong></p>

<p><img src="/images/rhyme/rhyme.gif" alt="rhyme" /></p>

<p><strong>Real coders use <code>cat</code> ;)?</strong></p>

<p>Keep rhyming till next week!</p>

		
		
	</div>

</article>


    <article class="post">
	<header>
		<h2 class="title">
			
			<a href="/block.js/">
			
				block.js</a>
		</h2>
		<div class="meta date">








  


<time datetime="2014-04-24T19:12:16+05:30" pubdate data-updated="true">Apr 24<span>th</span>, 2014</time></div>
	</header>
	<div class="entry-content">
		<p><a href="https://www.npmjs.org/package/block">Block.js</a>: Ridiculously simple HTML templating. All it does is replaces "blocks" in your template with a local.</p>

<p>The crux of this module is in these simple lines of code:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="kd">function</span> <span class="nx">replace</span><span class="p">(</span><span class="nx">string</span><span class="p">,</span> <span class="nx">key</span><span class="p">,</span> <span class="nx">value</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>  <span class="k">return</span> <span class="nx">string</span><span class="p">.</span><span class="nx">replace</span><span class="p">(</span>
</span><span class='line'>    <span class="k">new</span> <span class="nb">RegExp</span><span class="p">(</span><span class="s1">&#39;\\{\\{\\s*&#39;</span> <span class="o">+</span> <span class="nx">escapeRegExp</span><span class="p">(</span><span class="nx">key</span><span class="p">)</span> <span class="o">+</span> <span class="s1">&#39;\\s*\\}\\}&#39;</span><span class="p">,</span> <span class="s1">&#39;g&#39;</span><span class="p">),</span>
</span><span class='line'>    <span class="nx">value</span> <span class="o">||</span> <span class="s1">&#39;&#39;</span>
</span><span class='line'>  <span class="p">)</span>
</span><span class='line'><span class="p">}</span>
</span><span class='line'>
</span><span class='line'><span class="kd">function</span> <span class="nx">escapeRegExp</span><span class="p">(</span><span class="nx">str</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>  <span class="k">return</span> <span class="nx">str</span><span class="p">.</span><span class="nx">replace</span><span class="p">(</span><span class="sr">/([.*+?=^!:${}()|[\]\/\\])/g</span><span class="p">,</span> <span class="s1">&#39;\\$1&#39;</span><span class="p">)</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>The API is also pretty simple:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="kd">var</span> <span class="nx">template</span> <span class="o">=</span> <span class="nx">Block</span><span class="p">(</span><span class="nx">html</span><span class="p">);</span>
</span><span class='line'><span class="c1">//html is a string, and block returns a new templating instance.</span>
</span><span class='line'>
</span><span class='line'><span class="nx">template</span><span class="p">.</span><span class="nx">render</span><span class="p">(</span><span class="nx">locals</span><span class="p">);</span>
</span><span class='line'><span class="c1">//locals is an object of &quot;blocks&quot; to replace in the template.</span>
</span></code></pre></td></tr></table></div></figure>


<p><strong>Simple Example:</strong></p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="kd">var</span> <span class="nx">block</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;block&#39;</span><span class="p">)</span>
</span><span class='line'><span class="p">,</span> <span class="nx">fs</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;fs&#39;</span><span class="p">)</span>
</span><span class='line'><span class="p">,</span> <span class="nx">tmpl</span> <span class="o">=</span> <span class="nx">fs</span><span class="p">.</span><span class="nx">readFileSync</span><span class="p">(</span><span class="s1">&#39;block.html&#39;</span><span class="p">,</span> <span class="s1">&#39;utf-8&#39;</span><span class="p">)</span>
</span><span class='line'><span class="p">,</span> <span class="nx">data</span> <span class="o">=</span> <span class="nx">block</span><span class="p">(</span><span class="nx">tmpl</span><span class="p">).</span><span class="nx">render</span><span class="p">(</span> <span class="p">{</span><span class="nx">content</span><span class="o">:</span> <span class="s1">&#39;&lt;div class=&quot;inner&quot;&gt;&lt;/div&gt;&#39;</span><span class="p">});</span>
</span><span class='line'>
</span><span class='line'><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">data</span><span class="p">);</span>
</span></code></pre></td></tr></table></div></figure>


<p><strong>GIF GTW!:</strong>
<img src="/images/block.js/block.js.gif" alt="block" /></p>

<p>Hope you liked this simple HTML templating engine! Go ahead and <code>.replace('', string)</code></p>

<p>Thanks to the author <a href="http://jongleberry.com">Jonathan Ong</a>.</p>

		
		
	</div>

</article>


    <article class="post">
	<header>
		<h2 class="title">
			
			<a href="/json-mask/">
			
				Json-mask</a>
		</h2>
		<div class="meta date">








  


<time datetime="2014-04-17T17:50:46+05:30" pubdate data-updated="true">Apr 17<span>th</span>, 2014</time></div>
	</header>
	<div class="entry-content">
		<p><a href="https://github.com/nemtsov/json-mask">json-mask</a> Tiny language and engine for selecting specific parts of a JS object, hiding the rest.</p>

<p><img src="https://raw.github.com/nemtsov/json-mask/master/logo.png" alt="" /></p>

<p>The main difference between JSONPath / JSONSelect and this engine is that JSON Mask preserves the structure of the original input object.</p>

<p>It's <a href="https://github.com/nemtsov/json-mask/blob/master/lib/compiler.js">complier</a> uses a cute grammar syntax:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
</pre></td><td class='code'><pre><code class=''><span class='line'> Props ::= Prop | Prop "," Props
</span><span class='line'>   Prop ::= Object | Array
</span><span class='line'> Object ::= NAME | NAME "/" Object
</span><span class='line'>  Array ::= NAME "(" Props ")"
</span><span class='line'>   NAME ::= ? all visible characters ?</span></code></pre></td></tr></table></div></figure>


<p>Translating it few examples, that are loosely based on XPath syntax:</p>

<ul>
<li><code>a,b,c</code> comma-separated list will select multiple fields</li>
<li><code>a/b/c</code> path will select a field from its parent</li>
<li><code>a(b,c)</code> sub-selection will select many fields from a parent</li>
<li><code>a/*/c</code> the star <code>*</code> wildcard will select all items in a field</li>
</ul>


<p><strong>Example:</strong></p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="o">&gt;</span> <span class="kd">var</span> <span class="nx">jmask</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;json-mask&#39;</span><span class="p">);</span>
</span><span class='line'>
</span><span class='line'><span class="o">&gt;</span> <span class="kd">var</span> <span class="nx">data</span> <span class="o">=</span> <span class="p">{</span><span class="nx">name</span><span class="o">:</span> <span class="p">{</span><span class="nx">first</span><span class="o">:</span> <span class="s1">&#39;hemanth&#39;</span><span class="p">,</span> <span class="nx">last</span><span class="o">:</span><span class="s1">&#39;hm&#39;</span><span class="p">},</span> <span class="nx">age</span><span class="o">:</span><span class="mi">7</span><span class="p">}</span>
</span><span class='line'>
</span><span class='line'><span class="o">&gt;</span> <span class="nx">jmask</span><span class="p">(</span><span class="nx">data</span><span class="p">,</span><span class="s1">&#39;name&#39;</span><span class="p">)</span>
</span><span class='line'><span class="p">{</span> <span class="nx">name</span><span class="o">:</span> <span class="p">{</span> <span class="nx">first</span><span class="o">:</span> <span class="s1">&#39;hemanth&#39;</span><span class="p">,</span> <span class="nx">last</span><span class="o">:</span> <span class="s1">&#39;hm&#39;</span> <span class="p">}</span> <span class="p">}</span>
</span><span class='line'>
</span><span class='line'><span class="o">&gt;</span> <span class="nx">jmask</span><span class="p">(</span><span class="nx">data</span><span class="p">,</span><span class="s1">&#39;name/first&#39;</span><span class="p">)</span>
</span><span class='line'><span class="p">{</span> <span class="nx">name</span><span class="o">:</span> <span class="p">{</span> <span class="nx">first</span><span class="o">:</span> <span class="s1">&#39;hemanth&#39;</span> <span class="p">}</span> <span class="p">}</span>
</span><span class='line'>
</span><span class='line'><span class="o">&gt;</span> <span class="nx">jmask</span><span class="p">(</span><span class="nx">data</span><span class="p">,</span><span class="s1">&#39;name/last&#39;</span><span class="p">)</span>
</span><span class='line'><span class="p">{</span> <span class="nx">name</span><span class="o">:</span> <span class="p">{</span> <span class="nx">last</span><span class="o">:</span> <span class="s1">&#39;hm&#39;</span> <span class="p">}</span> <span class="p">}</span>
</span><span class='line'>
</span><span class='line'><span class="o">&gt;</span> <span class="nx">jmask</span><span class="p">(</span><span class="nx">data</span><span class="p">,</span><span class="s1">&#39;name/first,age&#39;</span><span class="p">)</span>
</span><span class='line'><span class="p">{</span> <span class="nx">name</span><span class="o">:</span> <span class="p">{</span> <span class="nx">first</span><span class="o">:</span> <span class="s1">&#39;hemanth&#39;</span> <span class="p">},</span> <span class="nx">age</span><span class="o">:</span> <span class="mi">7</span> <span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<p><strong>GIF FTW!</strong></p>

<p><img src="/images/json-mask/json-mask.gif" alt="json-mask" /></p>

<p>Special thanks to the author <a href="http://yuriynemtsov.com">Yuriy Nemtsov</a> for a wonderful module!</p>

		
		
	</div>

</article>

<nav id="pagenavi">
    
        <a href="/blog/page/21/" class="prev">Previous</a>
    
    
        <a href="/blog/page/23/" class="next">Next</a>
    
</nav>
</div>
	<footer id="footer" class="inner"><br>
<br>
<br>
<br>
&copy; 2018

   <a href="http://h3manth.com">Hemanth.HM</a>
   <br>
   <a href="https://github.com/hemanth/nmotw.in/issues">Suggest a module</a>
   <br>
   <a href="http://nmotw.in/subscribe/">Subscribe</a>

</footer>
	<script src="/javascripts/slash.js"></script>
<script src="/javascripts/hyphenator.js"></script>


<script type="text/javascript">
      var disqus_shortname = 'nmotw';
      
        
        var disqus_script = 'count.js';
      
    (function () {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = 'http://' + disqus_shortname + '.disqus.com/' + disqus_script;
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    }());
</script>



	<script type="text/javascript">
		var _gaq = _gaq || [];
		_gaq.push(['_setAccount', 'UA-7949129-5']);
		_gaq.push(['_trackPageview']);

		(function() {
			var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
			ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
			var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
		})();
	</script>




</body>
<script>
  $(document).ready(function() {
  // Make images center
  $('p:has(img)').css('text-align', 'center');
  });
</script>
</html>
